<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js API</title>
    <style>
        .test1 {
            width: 200px;
            height: 200px;
        }

        .font-color {
            color: #6cd559;
        }
    </style>
</head>
<body>
<div class="test1">
    <h2>1.抽奖</h2>
    一等奖：<h2></h2>
    <button class="btn">开始抽奖</button>
    <br>

    <h2>2.倒计时</h2>
    <button class="btn2" disabled>已阅读(5)</button>
    <br>

    <h2>3.事件监听</h2>
    <input class="listen-input" type="text">
</div>
<script>
    // 1.抽奖
    (function () {
        const box = document.querySelector(".test1") // css选择器获取标签
        const prize = document.querySelector(".test1 h2")
        const button = document.querySelector(".test1 .btn")
        const arr = ['yorick', 'tom', 'jerry']
        const color = ['skyblue', 'pink', 'purple']
        button.addEventListener("click", function () { // btn监听click事件
            let randomIndex = parseInt(Math.random() * arr.length)
            prize.innerHTML = arr[randomIndex] // 修改文本内容
            box.style.backgroundColor = color[randomIndex] // style修改样式信息
            box.classList.add("font-color") // classList添加样式信息
        })
    })();

    // 2.倒计时
    (function () {
        const btn2 = document.querySelector(".btn2")
        let time = 5
        let n = setInterval(function () { // 开启1s定时器
            time--
            btn2.innerHTML = `已阅读(${time})`
            if (time === 0) {
                btn2.innerHTML = '已阅读'
                btn2.disabled = false // 启动btn
                clearInterval(n) // 关闭定时器
            }
        }, 1000)
    })();

    // 3.事件监听
    (function () {
        const listen_input = document.querySelector(".listen-input")
        listen_input.addEventListener("focus", function () {
            console.log("input focus") // 获取焦点事件
        })
        listen_input.addEventListener("blur", function () {
            console.log("input blur") // 失去焦点事件
        })
        listen_input.addEventListener("keydown", function () {
            console.log("input keydown") // 键盘按下触发事件
        })
        listen_input.addEventListener("keyup", function (e) { // e => 事件对象
            console.log(listen_input.value) // 键盘抬起触发事件
            if (e.key === 'Enter') { // e.key 表示输入的字符
                console.log("回车字符")
            }
        })
        listen_input.addEventListener("mouseenter", function () {
            console.log("input mouseenter") // 鼠标进入事件
        })
        listen_input.addEventListener("mouseleave", function () {
            console.log("input mouseleave") // 鼠标离开事件
        })
        listen_input.addEventListener("input", function () {
            console.log(`input value length: ${listen_input.value.length}`) // 用户输入事件
        })
    })();

    (function () {
        console.log(this)
    })()

</script>
</body>
</html>